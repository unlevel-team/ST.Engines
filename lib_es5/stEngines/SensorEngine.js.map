{"version":3,"sources":["stEngines/SensorEngine.js"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;AAeA,IAAI,eAAe,QAAQ,QAAR,EAAkB,YAArC;;;;;AAMA,IAAM,yBAAyB;;AAE9B,WAAW;AACV,oBAAmB,QADT;AAEV,mBAAkB,OAFR;AAGV,qBAAoB,SAHV;AAIV,kBAAiB;AAJP,EAFmB;;AAU9B,WAAW;AACV,mBAAkB,WADR;AAEV,mBAAkB,gBAFR;;AAIV,wBAAuB,UAJb;AAKV,uBAAsB,SALZ;;AAOV,gBAAe;;AAPL;;AAVmB,CAA/B;;;;;;;;;;;;;;IAmCM,Y;;;;;;;;AAOL,uBAAY,MAAZ,EAAoB;AAAA;;AAEnB,OAAK,MAAL,GAAc,MAAd;AACA,OAAK,SAAL,GAAiB,IAAjB;;AAEA,OAAK,SAAL,GAAiB,sBAAjB;;AAGA,OAAK,KAAL,GAAa,KAAK,SAAL,CAAe,MAAf,CAAsB,cAAnC;;AAGA,OAAK,YAAL,GAAoB,IAAI,YAAJ,EAApB;AAEA;;;;;;;;;+BAKY;;AAEZ,OAAI,eAAe,IAAnB;;;AAGA,gBAAa,YAAb,CAA0B,EAA1B,CAA8B,aAAa,SAAb,CAAuB,MAAvB,CAA8B,aAA5D,EAA2E,YAAW;AACrF,kBAAe,aAAa,SAA5B;AACA,iBAAa,KAAb,GAAqB,aAAa,SAAb,CAAuB,MAAvB,CAA8B,aAAnD;AACA,IAHD;;AAKA,gBAAa,KAAb,GAAqB,aAAa,SAAb,CAAuB,MAAvB,CAA8B,aAAnD;AACA;;;;;;;;6BAMU;;AAET,OAAI,eAAe,IAAnB;;AAEA,OAAK,aAAa,KAAb,KAAuB,aAAa,SAAb,CAAuB,MAAvB,CAA8B,aAA1D,EAA0E;AACzE,UAAM,WAAN;AACA;;AAED,gBAAa,KAAb,GAAqB,aAAa,SAAb,CAAuB,MAAvB,CAA8B,eAAnD;;AAEA,gBAAa,SAAb,GAAyB,YAAY,YAAM;AAC1C,QAAI,aAAa,KAAb,KAAuB,aAAa,SAAb,CAAuB,MAAvB,CAA8B,eAAzD,EAA0E;;;AAGzE,kBAAa,YAAb,CAA0B,IAA1B,CAA+B,aAAa,SAAb,CAAuB,MAAvB,CAA8B,aAA7D;AACA,KAJD,MAIO;;;AAGN,kBAAa,YAAb,CAA0B,IAA1B,CAA+B,aAAa,SAAb,CAAuB,MAAvB,CAA8B,aAA7D;AACA;AACD,IAVwB,EAUtB,aAAa,MAAb,CAAoB,QAVE,CAAzB;AAYD;;;;;;;;iCAMc;AACd,OAAI,eAAe,IAAnB;AACA,gBAAa,YAAb,CAA0B,IAA1B,CAA+B,aAAa,SAAb,CAAuB,MAAvB,CAA8B,aAA7D,E;AACA;;;;;;;;;gCAOa,CAEb;;;;;;;;;+BAMY,CAEZ;;;;;;;;;;+BAOY;AACZ,UAAO,EAAP;AACA;;;;;;;;;6BAMU,O,EAAS,CAEnB;;;;;;AAKF,OAAO,OAAP,GAAiB,YAAjB","file":"stEngines/SensorEngine.js","sourcesContent":["\"use strict\";\r\n\r\n/**\r\n * SensorEngine\r\n * \r\n * Generic process for a Sensor\r\n * \r\n * @ignore\r\n */\r\n\r\n\r\n/**\r\n * Import EventEmitter\r\n * @ignore\r\n */\r\nlet EventEmitter = require('events').EventEmitter;\r\n\r\n\r\n/**\r\n * SensorEngine CONSTANTS\r\n */\r\nconst SensorEngine_CONSTANTS = {\r\n\t\t\r\n\t\"States\" : {\r\n\t\t\"SEstate_Config\" : \"config\",\r\n\t\t\"SEstate_Ready\" : \"ready\",\r\n\t\t\"SEstate_Working\" : \"working\",\r\n\t\t\"SEstate_Stop\" : \"stop\"\r\n\t},\r\n\t\r\n\t\r\n\t\"Events\" : {\r\n\t\t\"MainLoop_Tick\" : \"Main Loop\",\r\n\t\t\"MainLoop_Stop\" : \"Main Loop Stop\",\r\n\t\t\r\n\t\t\"SensorEngine_Start\" : \"SE start\",\r\n\t\t\"SensorEngine_Stop\" : \"SE stop\",\r\n\t\t\r\n\t\t\"SensorData\" : \"Sensor Data\"\r\n\t\t\r\n\t}\r\n\t\t\r\n};\r\n\r\n\r\n/**\r\n * Sensor Engine\r\n * \r\n * @class\r\n * @property {object} config - Configuration.\r\n * @property {object} _mainLoop - Main loop reference object.\r\n * @property {String} state - State.\r\n * @property {object} eventEmitter - Object for emit events.\r\n * \r\n * \r\n */\r\nclass SensorEngine {\r\n\t\r\n\t/**\r\n\t * @constructs SensorEngine\r\n\t * \r\n\t * @param {object} config Configuration object\r\n\t */\r\n\tconstructor(config) {\r\n\t\t\r\n\t\tthis.config = config;\r\n\t\tthis._mainLoop = null;\r\n\t\t\r\n\t\tthis.CONSTANTS = SensorEngine_CONSTANTS;\r\n\t\t\r\n\t\t\r\n\t\tthis.state = this.CONSTANTS.States.SEstate_Config;\r\n\t\t\r\n\t\t\r\n\t\tthis.eventEmitter = new EventEmitter();\r\n\r\n\t}\r\n\t\r\n\t/**\r\n\t * Initialize\r\n\t */\r\n\tinitialize() {\r\n\t\t\r\n\t\tlet sensorEngine = this;\r\n\t\t\r\n\t\t// Map event MainLoop_Stop\r\n\t\tsensorEngine.eventEmitter.on( sensorEngine.CONSTANTS.Events.MainLoop_Stop, function() {\r\n\t\t\tclearInterval( sensorEngine._mainLoop );\r\n\t\t\tsensorEngine.state = sensorEngine.CONSTANTS.States.SEstate_Ready;\r\n\t\t});\r\n\t\t\r\n\t\tsensorEngine.state = sensorEngine.CONSTANTS.States.SEstate_Ready;\r\n\t}\r\n\t\r\n\t\r\n\t/**\r\n\t * Main loop\r\n\t */\r\n\tmainLoop() {\r\n\t\t\r\n\t  let sensorEngine = this;\r\n\t  \r\n\t  if ( sensorEngine.state !== sensorEngine.CONSTANTS.States.SEstate_Ready ) {\r\n\t\t  throw \"Bad state\";\r\n\t  }\r\n\t  \r\n\t  sensorEngine.state = sensorEngine.CONSTANTS.States.SEstate_Working;\r\n\t  \r\n\t  sensorEngine._mainLoop = setInterval(() => {\r\n\t\t  if (sensorEngine.state === sensorEngine.CONSTANTS.States.SEstate_Working) {\r\n\t\t\t  \r\n\t\t\t  // Emit event MainLoop_Tick\r\n\t\t\t  sensorEngine.eventEmitter.emit(sensorEngine.CONSTANTS.Events.MainLoop_Tick);\r\n\t\t  } else {\r\n\t\t\t  \r\n\t\t\t  // Emit event MainLoop_Stop\r\n\t\t\t  sensorEngine.eventEmitter.emit(sensorEngine.CONSTANTS.Events.MainLoop_Stop);\r\n\t\t  }\r\n\t  }, sensorEngine.config.loopTime);\r\n\t  \r\n\t}\r\n\t\r\n\t\r\n\t/**\r\n\t * Stop main loop\r\n\t */\r\n\tstopMainLoop() {\r\n\t\tlet sensorEngine = this;\r\n\t\tsensorEngine.eventEmitter.emit(sensorEngine.CONSTANTS.Events.MainLoop_Stop);\t// Emit event MainLoop_Stop\r\n\t}\r\n\t\r\n\t\r\n\t/**\r\n\t * Start engine\r\n\t * @abstract \r\n\t */\r\n\tstartEngine() {\r\n\t\t\r\n\t}\r\n\t\r\n\t/**\r\n\t * Stop engine\r\n\t * @abstract \r\n\t */\r\n\tstopEngine() {\r\n\t\t\r\n\t}\r\n\t\r\n\t/**\r\n\t * Get options\r\n\t * @abstract \r\n\t * @return {object} Options object\r\n\t */\t\r\n\tgetOptions() {\r\n\t\treturn {};\r\n\t}\r\n\t\r\n\t/**\r\n\t * @abstract \r\n\t * @param {object} options Options object.\r\n\t */\t\r\n\tsetOptions(options) {\r\n\t\t\r\n\t}\r\n\t\r\n}\r\n\r\n\r\nmodule.exports = SensorEngine;\r\n"],"sourceRoot":"C:\\Users\\Felipe\\Documents\\Work\\SomeThings\\dev\\NLVL_STEngines\\es6"}